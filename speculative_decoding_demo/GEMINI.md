# Speculative Decoding Demo - Visual Guidelines (Updated)

## 1. æ ¸å¿ƒæ¦‚å¿µ (Core Concepts)
æœ¬åŠ¨ç”»æ—¨åœ¨ç›´è§‚å±•ç¤º **æŠ•æœºè§£ç  (Speculative Decoding)** çš„å·¥ä½œæµç¨‹åŠå…¶èƒŒåçš„å·¥ç¨‹åŸç†ã€‚
æ ¸å¿ƒéšå–»ï¼š**å®ä¹ ç”Ÿ (Intern/Draft)** ä¸ **ä¸»ç¼– (Editor/Target)** çš„åä½œã€‚
æ ¸å¿ƒä»·å€¼ï¼š**è®¡ç®—æ¢å¸¦å®½ (Compute for Bandwidth)**ï¼Œå°†ä¸²è¡Œå†™ä½œè½¬åŒ–ä¸ºå¹¶è¡Œé˜…è¯»ã€‚

## 2. å‰§æœ¬æµç¨‹ (Shot List)

### Scene 01: Intro (The Two Modes)
- **Visual**: åˆ†å±å±•ç¤ºã€‚å·¦ä¾§ "Prefill Mode" (æ–‡å­—ç¬é—´å‡ºç°)ï¼Œå³ä¾§ "Decoding Mode" (æ‰“å­—æœºé€å­—è¹¦å‡º)ã€‚
- **Subtitle**: "å¤§æ¨¡å‹æœ‰ä¸¤ç§æ¨¡å¼ï¼šé˜…è¯»æ¨¡å¼ï¼ˆå¹¶è¡Œ/æå¿«ï¼‰ vs å†™ä½œæ¨¡å¼ï¼ˆä¸²è¡Œ/ææ…¢ï¼‰ã€‚"
- **Action**: å·¦ä¾§ä¸€é—ªè€Œè¿‡ï¼Œå³ä¾§æ…¢åååœ°æ‰“å­—ã€‚

### Scene 02: The Bottleneck (Memory Wall)
- **Visual**: å·¨å¤§çš„ç´«è‰²å¡è½¦ (26GB Weights) ç¼“æ…¢é©¶å…¥ï¼Œå¸ä¸‹ä¸€ä¸ªå°å°çš„ä¿¡å° (Token)ã€‚
- **Subtitle**: "ä¸ºäº†å†™ä¸€ä¸ªå­—ï¼Œä¸»ç¼–è¦æŠŠ 26GB çš„å­—å…¸æ¬è¿ä¸€éã€‚å¸¦å®½å…¨æµªè´¹åœ¨è·¯ä¸Šäº†ã€‚"
- **Action**: å¡è½¦åå¤å¾€è¿”ï¼Œæ•ˆç‡æä½ã€‚ç•™ç™½æ—¶é—´å¤§å¹…å»¶é•¿ï¼Œè®©è§‚ä¼—æ€è€ƒâ€œä¸²è¡Œ vs å¹¶è¡Œâ€çš„ç“¶é¢ˆã€‚

### Scene 03: The Solution (Drafting)
- **Visual**: åä½œæ¨¡å¼å¯åŠ¨ã€‚ç”»é¢ä¸­åŒæ—¶å‡ºç° **ä¸»ç¼–ï¼ˆå’–å•¡æ¯å›¾æ ‡ï¼Œå¾…å‘½çŠ¶æ€ï¼‰** å’Œ **å®ä¹ ç”Ÿï¼ˆå®‰å…¨å¸½å›¾æ ‡ï¼Œå·¥ä½œçŠ¶æ€ï¼‰**ã€‚
- **Subtitle**: "è§£å†³æ–¹æ¡ˆï¼šé‡‡ç”¨ã€åä½œæ¨¡å¼ã€‘ã€‚ä¸»ç¼–æš‚åœç”Ÿæˆå¹¶å¾…å‘½ï¼Œç”±å®ä¹ ç”Ÿæ¥æ‰‹å¿«é€Ÿè‰æ‹Ÿã€‚"
- **Action**: å®ä¹ ç”Ÿå¿«é€Ÿæ‰”å‡º 4 ä¸ªè“è‰²ä¿¡å° `["stared", " at", " the", " broken"]`ï¼Œä¸»ç¼–åœ¨ä¸€æ—é™å€™ã€‚ä½“ç°â€œåˆ†å·¥åˆä½œâ€ã€‚

### Scene 04: Verification (Mode Switch)
- **Visual**: ç´«è‰²å¡è½¦ï¼ˆåŒ Scene 02ï¼‰ä»å·¦ä¾§é©¶å…¥å±å¹•ä¸­å¤®ï¼Œä¿æŒåœ¨åº•éƒ¨è·¯é¢ï¼Œä¸é®æŒ¡ä¸Šæ–¹å…ƒç´ ã€‚
- **Subtitle**: "ä¸»ç¼–å›å½’ï¼šä¸€æ¬¡æ¬è¿ï¼ŒåŒæ—¶å¹¶è¡Œæ£€æŸ¥æ‰€æœ‰è‰ç¨¿ï¼"
- **Action**: å¡è½¦æ‰«æä»ªå°„å‡ºä¸€é“å®½å…‰æŸï¼Œ**åŒæ—¶**è¦†ç›– 4 ä¸ªä¿¡å°ã€‚ä¿¡å°å˜ç»¿è¡¨ç¤ºé€šè¿‡ã€‚å­—å¹•éšåæ˜¾ç¤º "åˆ‡æ¢åˆ°ã€é˜…è¯»æ¨¡å¼ã€‘ï¼šæ•ˆç‡æå‡æ•°å€"ã€‚

### Scene 05: Probability Game (Accept)
- **Visual**: æŸ±çŠ¶å›¾å¯¹æ¯”ã€‚Token "apple"ã€‚
- **Subtitle**: "ä¸»ç¼–ç©çš„æ˜¯æ¦‚ç‡åšå¼ˆã€‚å®ä¹ ç”ŸæŠŠæ¡ 60%ï¼Œä¸»ç¼–æŠŠæ¡ 80%ã€‚ä¸»ç¼–æ›´ç¡®ä¿¡ï¼Œé€šè¿‡ï¼"
- **Action**: ç´«è‰²æŸ±å­ (80%) é«˜äº è“è‰²æŸ±å­ (60%)ï¼Œç›–ç«  "ACCEPTED"ã€‚

### Scene 06: Rejection & Resample (Quality Guard)
- **Visual**: æŸ±çŠ¶å›¾å¯¹æ¯”ã€‚Token "pear"ã€‚å…¬å¼å±•ç¤º `P'(x) = norm(max(0, p - q))`ã€‚
- **Subtitle**: "å®ä¹ ç”ŸççŒœ 'pear' (99%)ï¼Œä¸»ç¼–è§‰å¾—åªæœ‰ 10%ã€‚ä¸ºäº†ä¿è´¨é‡ï¼Œå¿…é¡»æ‹’ç»å¹¶é‡å†™ã€‚"
- **Action**: 
  1. å·¨å¤§çš„çº¢è‰²å‰å·æ‰“åœ¨ "pear" ä¸Š (REJECTED)ã€‚
  2. **Formula**: é‡‘è‰²å…¬å¼æµ®ç°ï¼Œè§£é‡Šä¿®æ­£é€»è¾‘ã€‚
  3. **Wipe Effect**: é”™è¯¯å•è¯ "pear" åƒæ©¡çš®æ“¦ä¸€æ ·è¢«ä»å³å‘å·¦æ“¦é™¤ (Width 100% -> 0%)ã€‚
  4. **KV Cache**: åº•éƒ¨å±•ç¤º KV Cache æ˜¾å­˜æ¡ï¼Œä»£è¡¨ "pear" çš„çº¢è‰²å—è¢«ç‰©ç†æ“¦é™¤ (Rollback)ï¼Œéšåè¿½åŠ æ–°çš„ç´«è‰²å— "peach"ã€‚
  5. **Result**: é‡ç»„ä¸ºç´«è‰²çš„ "peach"ã€‚

### Scene 07: Value Scenario A (Coding)
- **Visual**: ä»£ç å±å¹•é£é€Ÿæ»šåŠ¨ï¼Œä»ªè¡¨ç›˜æ˜¾ç¤º "5X Speed"ã€‚
- **Subtitle**: "å†™ä»£ç ï¼ˆç®€å•åœºæ™¯ï¼‰ï¼šå®ä¹ ç”Ÿå‡ ä¹å…¨å¯¹ï¼Œé€Ÿåº¦ç›´æ¥ 5 å€èµ·é£ï¼"

### Scene 08: Value Scenario B (Creative)
- **Visual**: å°è¯´æ–‡æœ¬æ‰“å­—æœºï¼Œä»ªè¡¨ç›˜æ˜¾ç¤º "1.5X Speed"ã€‚
- **Subtitle**: "å†™å°è¯´ï¼ˆå›°éš¾åœºæ™¯ï¼‰ï¼šè™½ç„¶å¸¸è¢«æ‹’ï¼Œä½†ç¨³èµšä¸èµ”ï¼Œä¾ç„¶æœ‰ 1.5 å€åŠ é€Ÿã€‚"

### Scene 09: Grand Summary
- **Visual**: ä¸‰å¤§å›¾æ ‡ç‚¹äº® (Reading Mode, Bandwidth Saved, Quality Guard)ã€‚
- **Subtitle**: "æŠ•æœºè§£ç ï¼šç”¨è®¡ç®—æ¢å¸¦å®½ï¼Œç”¨æ¦‚ç‡ä¿è´¨é‡ã€‚æ˜¾å­˜æ²¡å˜ï¼Œé€Ÿåº¦èµ·é£ï¼"
- **Center Text**: **ğŸš€ 3X FASTER (AVG) ğŸš€**

## 3. è§†è§‰è§„èŒƒ (Visual Specs)
- **é…è‰²**:
  - Draft: Blue-400 (`#60a5fa`)
  - Target: Purple-500 (`#a855f7`)
  - Valid: Green-500 (`#22c55e`)
  - Invalid: Red-500 (`#ef4444`)
  - Background: Slate-900 (`#0f172a`)
- **å¸ƒå±€**: Retro Terminal é£æ ¼ï¼Œç½‘æ ¼èƒŒæ™¯ï¼Œéœ“è™¹å…‰æ•ˆã€‚

## 4. æŠ€æœ¯å®ç°ç»†èŠ‚
- **App.vue**: æ ¸å¿ƒé€»è¾‘æ›´æ–°ï¼Œå¢åŠ  `prefillMode`, `decodeMode`, `probabilityChart` ç­‰çŠ¶æ€ã€‚
- **Anime.js**: ç²¾ç¡®æ§åˆ¶æ—¶é—´è½´ï¼Œé…åˆå­—å¹•èŠ‚å¥ã€‚
